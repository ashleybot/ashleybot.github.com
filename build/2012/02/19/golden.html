<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
	<head>
	
		<!-- Basic Page Needs
	  ================================================== -->
		<meta charset="utf-8">
		<title>The Golden Gate</title>
		<meta name="description" content="In the post, I provide a link to a code example of Nokogiri and explain XML data access with D3.js.">
		<meta name="author" content="Ashley Greer">
		<meta name="keywords" content="d3,d3.js,xml,ruby,nokogiri,javascript,half-marathon">
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	
		<!-- Mobile Specific Metas
	  ================================================== -->
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<!-- CSS
	  ================================================== -->
		<link rel="stylesheet" href="/stylesheets/base.css">
		<link rel="stylesheet" href="/stylesheets/skeleton.css">
		<link rel="stylesheet" href="/stylesheets/layout.css">
		<link rel="stylesheet" href="/stylesheets/main.css">
		<link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
		
		<!-- Early-loaded JS
		================================================== -->
		<script src="http://mbostock.github.com/d3/d3.js?2.7.4"></script>
		
		<!-- Favicons
		================================================== -->
		<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png">
	</head>
	<body>
	
		<div class="container">
			<div class="thirteen columns">
				<h1 class="remove-bottom" style="margin-top: 40px"><a href="/">Ashley Greer Wilson</a></h1>				
			</div>
			<div class="three columns omega">
				<a href="http://github.com/ashleybot"><img alt="ashleybot's github" style="width:20px;padding:10px;" src="https://a248.e.akamai.net/assets.github.com/images/modules/footer/blacktocat.svg" /></a>
				<a href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" ><img alt="RSS" style="width:20px;padding:10px;" src="/images/bigrss.gif" /></a>
			</div>
			<hr />
			
			<div class="sixteen columns">
			</div>
			<div class="one columns">
	<h2>The Golden Gate</h2>
	<p>
		This post is a glance into a few things I enjoy: outdoor activities, data visualization, and programming.
	</p>
	<p>
		I recently ran in the Golden Gate Trail Run half marathon.  It was the longest distance I have ran and it was nothing short of amazing.
	</p>
	<p>
		The results are posted online, but are hard to consume.  So, I scrubbed the page with a fast little Ruby parser called <a href="http://nokogiri.org/">Nokogiri</a> and saved the results as XML.  And I'm presenting the data in HTML using <a href="http://mbostock.github.com/d3/">D3.js</a>.
	</p>
	<p>
		I'll be using this data in future posts.  You can check out my parser code <a href="https://gist.github.com/1841870#file_golden_gate_trail_run_parser.rb">here</a>.
	</p>
	
	<h3>Race Results</h3>
	<ul class="tabs">
	  <!-- Give href an ID value of corresponding "tabs-content" <li>'s -->
	  <li><a class="active" href="#presentation">HTML View</a></li>
	  <li><a href="#raw">XML Node Example</a></li>
	  <li><a href="#js">D3 Code</a></li>
	</ul>

	<!-- Standard <ul> with class of "tabs-content" -->
	<ul class="tabs-content">
	  <!-- Give ID that matches HREF of above anchors -->
	  <li class="active" id="presentation">	
	  	
	  </li>  
	  <li id="raw">
	  	<script src="https://gist.github.com/1873934.js?file=Example.xml"></script>
		</li>
		<li id="js">
			<script src="https://gist.github.com/1873934.js?file=D3HTMLtable.js"></script>
		</li>
	</ul>
</div>

<script type="text/javascript">
d3.xml("/data/GoldenGate2012Results.xml", function(xml) {
	
	var runners = d3.select(xml).selectAll("runner")[0];
	
	var table = d3.select("#presentation").append("table").attr("class","grid");
	
  var thead = table.append("thead");
  thead.append("th").text("Gender");
  thead.append("th").text("City");
  thead.append("th").text("Time");
  thead.append("th").text("Pace");
	
	var tr = table.selectAll("tr")
    .data(runners)
   .enter().append("tr");
  
 	// place 
	var td = tr.selectAll("td")
		.data(function(d) {
			return d3.select(d).attr("gender");
		})
		.enter().append("td")
			.text(function(d) {
				return d;
			});
  
  // city
	tr.selectAll("tr")
	    .data(function(d) {
	    	return d3.select(d).select("city")[0]; 
	    })
	  .enter().append("td")
	    .text(function(d) {
	    	return d.textContent;
	    });
	    
	// time
	tr.selectAll("tr")
	    .data(function(d) {
	    	return d3.select(d).select("time")[0]; 
	    })
	  .enter().append("td")
	    .text(function(d) {
	    	return d.textContent;
	    });
		
	// pace
	tr.selectAll("tr")
	    .data(function(d) {
	    	return d3.select(d).select("pace")[0]; 
	    })
	  .enter().append("td")
	    .text(function(d) {
	    	return d.textContent;
	    });
});
  
</script>
			
			
			<hr />
			<div class="twelve columns alpha" style="margin-bottom:30px;">
				<small>
					Created by <a href="mailto:ashley@ashleygreer.com">Ashley Greer</a> 2012.
					<br />
					It's built with <a href="http://www.getskeleton.com/">Skeleton</a>, a css boilerplate for responsive design, using <a href="http://jekyllrb.com/">Jekyll</a>, a static site generator, and is hosted on <a href="http://github.com/">GitHub</a>.
				</small>

			</div>
			<div class="four columns omega" style="margin-bottom:30px;">
				<small>
					<img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" alt="CC BY-SA icon" />
					<br />
					Except where otherwise <strong>noted</strong>, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 License</a>.
				</small>
			</div>
		</div><!-- container -->
	
	
	
		<!-- JS
		================================================== -->
		<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
		<script src="http://getskeleton.com/src/javascripts/tabs.js"></script>

		<script type="text/javascript">

		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-29484417-1']);
		  _gaq.push(['_trackPageview']);
		
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		
		</script>
	</body>
 </html>