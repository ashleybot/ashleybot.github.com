<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
	<head>
	
		<!-- Basic Page Needs
	  ================================================== -->
		<meta charset="utf-8">
		<title>D3.js Transitions</title>
		<meta name="description" content="A simple animated bar chart using the D3 javascript library.">
		<meta name="author" content="Ashley Greer">
		<meta name="keywords" content="chart,animation,transition,javascript,d3,d3.js">
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	
		<!-- Mobile Specific Metas
	  ================================================== -->
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<!-- CSS
	  ================================================== -->
		<link rel="stylesheet" href="/stylesheets/base.css">
		<link rel="stylesheet" href="/stylesheets/skeleton.css">
		<link rel="stylesheet" href="/stylesheets/layout.css">
		<link rel="stylesheet" href="/stylesheets/main.css">
		<link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css">
		
		<!-- Early-loaded JS
		================================================== -->
		<script src="http://mbostock.github.com/d3/d3.js?2.7.4"></script>
		
		<!-- Favicons
		================================================== -->
		<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png">
	</head>
	<body>
	
		<div class="container">
			<div class="thirteen columns">
				<h1 class="remove-bottom" style="margin-top: 40px"><a href="/">Ashley Greer Wilson</a></h1>				
			</div>
			<div class="three columns omega">
				<a href="http://github.com/ashleybot"><img alt="ashleybot's github" style="width:20px;padding:10px;" src="https://a248.e.akamai.net/assets.github.com/images/modules/footer/blacktocat.svg" /></a>
				<a href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" ><img alt="RSS" style="width:20px;padding:10px;" src="/images/bigrss.gif" /></a>
			</div>
			<hr />
			
			<div class="sixteen columns">
			</div>
			<div class="sixteen columns">
	<h2>D3.js Transitions</h2>
	<p>
		This post will continue the <a href="/2012/02/15/d3-basics.html">D3 Basics</a> tutorial with animation, or, as they prefer to call it, transitions.
	</p>

	<h4>Simple Transitions</h4>
 	<div class="row clearfix">
 		<div class="seven columns alpha">
	  	<p>
	  		In this example, we'll be modifying the following vertical bar chart.  See the <a href="/2012/02/15/d3-basics.html">previous post</a> for more on creating the initial chart.
	  	</p> 		
  	</div>
 		<div class="eight columns offset-by-one omega">					
 			<div class="charts"></div> 

	  	<p id="example1">
	  		<button>Click me</button>
	  	</p>

		</div>
	</div>
 	<div class="row clearfix">
 		<div class="seven columns alpha">
		<p>
			We'll first define a redraw function for the chart.  It simply tells D3 to wait a second then redraw each bar.
		</p>
 		</div>
 		<div class="eight columns offset-by-one omega">
			<script src="https://gist.github.com/1850822.js?file=d3transistions1.js"></script>
 		</div>
 		
	</div>
 	<div class="row clearfix">
 		<div class="seven columns alpha">
  	<p>
  		Then, modify the dataset and call redraw().  I've attached this behavior to the button above, so click it and see what happens.
  	</p>
 		</div>
 		<div class="eight columns offset-by-one omega">
			<script src="https://gist.github.com/1850822.js?file=d3transistions2.js"></script>
 		</div>
	</div>
	<p>
		Simple, no?
	</p>
</div>

<script type="text/javascript">
	var data = [8, 12, 15, 30, 43];
	var w = 20,
      h = 50;
  
	var x = d3.scale.linear()
     .domain([0, 1])
     .range([0, w]);
     
  var y = d3.scale.linear()
     .domain([0, 50])
     .rangeRound([0, h]); //rangeRound is used for antialiasing
     
	var chart = d3.select(".charts").append("svg")
     .attr("class", "chart")
     .attr("width", w * data.length)
     .attr("height", h);
  
  // width is the width of the bar
  // height is the height of the bar
  // x and y are the position of the bar
  // for crips edges use -.5 (antialiasing)
  chart.selectAll("rect")
     .data(data)
   .enter().append("rect")
   		.attr("x", function(d, i) { return x(i) - .5; })
   		.attr("y", function(d) { return h - y(d) - .5; })
     	.attr("width", w)
     	.attr("height", function(d) { return y(d); } );

	chart.append("line")
     .attr("x1", 0)
     .attr("x2", w * data.length)
     .attr("y1", h - .5)
     .attr("y2", h - .5)
     .style("stroke", "#000");
     
  function redraw() {
  	chart.selectAll("rect")
  		.data(data)
  	 .transition()
  	 	.duration(1000)
   		.attr("y", function(d) { return h - y(d) - .5; })
     	.attr("height", function(d) { return y(d); } );  
   }
  
  d3.select("#example1 button").on("click", function() {
  	data[2] = 49;
  	redraw();
  });

</script>
			
			
			<hr />
			<div class="twelve columns alpha" style="margin-bottom:30px;">
				<small>
					Created by <a href="mailto:ashley@ashleygreer.com">Ashley Greer</a> 2012.
					<br />
					It's built with <a href="http://www.getskeleton.com/">Skeleton</a>, a css boilerplate for responsive design, using <a href="http://jekyllrb.com/">Jekyll</a>, a static site generator, and is hosted on <a href="http://github.com/">GitHub</a>.
				</small>

			</div>
			<div class="four columns omega" style="margin-bottom:30px;">
				<small>
					<img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" alt="CC BY-SA icon" />
					<br />
					Except where otherwise <strong>noted</strong>, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 License</a>.
				</small>
			</div>
		</div><!-- container -->
	
	
	
		<!-- JS
		================================================== -->
		<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
		<script src="http://getskeleton.com/src/javascripts/tabs.js"></script>

		<script type="text/javascript">

		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-29484417-1']);
		  _gaq.push(['_trackPageview']);
		
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		
		</script>
	</body>
 </html>